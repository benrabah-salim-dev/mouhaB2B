/* ---- Zone centrale : pas de scroll horizontal ---- */
.fm-page,
.fm-wrap,
.fm-body,
.fm-col-left,
.fm-col-right,
.fm-sec,
.fm-sec-body {
  overflow-x: hidden;
}

/* Mise en page confortable */
.fm-wrap { max-width: 1400px; margin: 0 auto; padding: 0 16px 24px; }
.fm-col-left, .fm-col-right { min-width: 0; }

/* Tables génériques (hors aperçu) */
.fm-table-lg table,
.fm-sec .table {
  width: 100%;
  table-layout: fixed;
}
.fm-sec .table th, .fm-sec .table td {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 260px;
}

/* ---------- APERÇU OPTIMISÉ (Mapping) ---------- */
.fm-preview {
  overflow-x: auto;
  border-top: 1px solid #e9ecef;
  background: #fff;
}

.fm-preview table {
  width: auto; /* Permet aux colonnes de respirer */
  min-width: 100%;
  table-layout: auto !important; 
}

/* Header : Autoriser le retour à la ligne pour éviter les "..." */
.fm-head-label-optimized {
  font-weight: 700;
  font-size: 11px !important;
  color: #111827;
  text-transform: uppercase;
  white-space: normal !important; /* Force le retour à la ligne */
  text-align: center;
  vertical-align: middle;
  min-width: 100px;
  max-width: 130px;
  line-height: 1.2;
  padding: 8px 4px !important;
  background: #f8f9fa;
}

.fm-preview td {
  white-space: nowrap;
  vertical-align: middle;
  padding: 6px 8px;
  font-size: 13px;
  color: #4b5563;
  border-bottom: 1px solid #f3f4f6;
}

/* Contrôles compacts */
.fm-map-select-compact {
  font-size: 12px !important;
  padding: 3px 5px !important;
  height: 30px !important;
  min-width: 110px;
}

.x-small-tag {
  font-size: 9px;
  font-weight: 800;
  color: #6b7280;
  margin-top: 2px;
}

/* Sticky Headers */
.fm-preview thead th {
  position: sticky;
  top: 0;
  z-index: 2;
  background: #f8f9fa;
  box-shadow: inset 0 -1px 0 #e5e7eb;
}

/* Layout & Sections */
.fm-body.twocol {
  display: grid;
  grid-template-columns: minmax(0, 1fr) 320px;
  gap: 16px;
  align-items: start;
}

.fm-top {
  display:flex; align-items:center; justify-content:space-between;
  padding:12px 20px; background:#fff; border-bottom:1px solid #e5e7eb;
}
.fm-title { font-size:20px; font-weight:700; color:#0f172a; margin:0; }
.fm-actions { display:flex; gap:8px; align-items:center; }
.fm-sep { width:1px; height:24px; background:#e5e7eb; margin:0 8px; }

.fm-sec {
  background:#fff; border:1px solid #e5e7eb;
  border-radius:10px; margin-bottom:16px; box-shadow:0 1px 2px rgba(0,0,0,0.05);
}

/* Modal */
.fm-modal-backdrop {
  position: fixed; inset: 0; background: rgba(15, 23, 42, 0.7);
  z-index: 2000; display: flex; align-items: center; justify-content: center;
  backdrop-filter: blur(2px);
}
.fm-modal {
  background: #fff; border-radius: 12px; width: 90%; max-width: 1100px;
  max-height: 85vh; overflow: hidden; display: flex; flex-direction: column;
}
.fm-modal-header { padding: 16px; border-bottom: 1px solid #e5e7eb; display: flex; justify-content: space-between; }
.fm-modal-body { padding: 0; overflow-y: auto; }
.fm-modal-footer { padding: 12px 16px; background: #f8f9fa; border-top: 1px solid #e5e7eb; }